{% extends 'base.html' %}

{% load i18n %}
{% load thumbnail %}

{% block content %}


{% comment %} Circle Name {% endcomment %}

<h1>
    {{circle}}

    {% if circle.ConfidentialRoom_score %}
    <small>
        <span class="badge bg-primary rounded-pill" data-bs-toggle="tooltip" data-bs-placement="left" title="{% translate 'Companionship score' %}">
            {{ circle.ConfidentialRoom_score }}
            
        </span>
    </small>
{% endif %}



{% comment %} organizers {% endcomment %}

{% if user in circle.organizers %}

<a class="btn btn-outline-primary btn-sm rounded-circle"
href="{% url 'circle-update' circle.id %}"
title = "{% translate 'Edit Circle' %}"
> 
<i class"bi bi-pencil"> Edit </i>

</a>
{% endif %}

</h1>

<div class="row">
    <div class="col col-md-7">
        <h2>
            <i class="bi bi-calendar3"></i>
            {% translate "Upcoming activities" %}
            <button
                type="button"
                class="btn btn-sm btn-outline-primary rounded-circle"
                data-bs-toggle="modal"
                data-bs-target="#add-activity-modal"
                title="{% translate 'Add activity' %}">
                <i class="bi bi-plus-lg">Add activity</i>
            </button>
        </h2>
        {% if circle.upcoming_activities.count %}
            {% for activity in activity_page.object_list %}
                {% include "circles/circle_activity.html" with activity=activity form=add_activity_form %}
            {% endfor %}
        {% else %}
            <p>{% translate "No activities found." %}</p>
        {% endif %}
    </div>

<div class="col-md-5 mt-2">
    
    <!-- Person photo -->

    {% if circle.photo %}
        <img
            src="{{ circle.photo|thumbnail_url:'square_thumbnail_400' }}"
            class="img-fluid img-thumbnail mb-3"
            alt='{% translate "Care group photo" %}' />
    {% endif %}

    
    {% if user in circle.organizers %}
    {% if circle.pending_join_requests.all %}
        <h2>
            <i class="bi bi-people"></i>
            {% translate "Applicants" %}
        </h2>

        <ul class="list-group">
            {% for applicant in circle.pending_join_requests.all %}
                {% include "circles/circle_applicant.html" %}
            {% endfor %}
        </ul>
    {% endif %}
{% endif %}
</div>

{% endblock content %}